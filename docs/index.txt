===================================
Landscape GeoPortal's Documentation
===================================

Overview
========

The Landscape GeoPortal allows to create multiple sites out of a single GeoNode installation. 
Each site can have it’s own set of resources and layout, there is although a “Master” site that is used for management and can access every resource, the “Master” site is also meant to be used to create new sites.
Layers loaded through a "Slave" site are visible, by default, by that site (for authorized users) and by the "Master" site.
There is a common database for all sites and the users pool is shared, from the administration panel is possible to manage the resources and share them among sites.
The Landscape GeoPortal is based on a contrib GeoNode app named “GeoSites” that is in charge of applying the Django Site framework to the resources managment.


How the Geosites work
---------------------

At the base of the Landscape GeoPortal there is the GeoNode GeoSites contrib app that makes full use of the Django Site framework to separate the content between sites.
The Association of a resource to a site is done through a OneToMany table named “SiteResources”, the table has two fields:
site, is a one to one relation with the Django Site and resources that is a many to many relation to the GeoNode ResourceBase model.

So there is one “SiteResources” entry for each site.
This table is used by GeoSites to filter the resources per site. GeoSites, in fact, overrides all the GeoNode data related enpoints like APIs, detail page, faceting facilities etc.

Some post_save signals ensure that on Resource (layer, map, document) save that resource is added to the SiteResource entry for the current site and for the Master site. something very similar happens for the post_delete.
Similar signals ensure that a SiteResource is created on Site creation.
